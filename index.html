<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/reveal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/css/zenburn.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/white.css">
    <!-- will fail when released -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.css">
    <!-- will fial when in development-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <meta charset="UTF-8">
    <style>
        .reveal section img {
            border: 0px;
            box-shadow: none;
        }

        .reveal pre code {
            max-height: 100%;
            overflow-x: hidden;
            width: 100%;
        }
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <!-- <section data-markdown="introduction.md" data-separator="^\?\?HORIZONTAL" data-separator-vertical="^\?\?VERTICAL" data-separator-notes="^Note:"
                data-charset="UTF-8">
            </section> -->
            <section>
                <h3>caesars-cipher.spec.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    const CaesarsCipher = require('./caesars-cipher')

                    describe('caesars-cipher', () => {
                        describe('encode', () => {
                            it(`should encode 'ABC' to 'BCD'`, () => {
                                expect(CaesarsCipher.encode(1, 'ABC')).toBe('BCD')
                            })
                        })
                    })
            </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.spec.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                        const CaesarsCipher = require('./caesars-cipher')
    
                        describe('caesars-cipher', () => {
                            describe('encode', () => {
                                it(`should encode 'ABC' to 'BCD'`, () => {
                                    expect(CaesarsCipher.encode(1, <mark>'ABC'</mark>)).toBe('BCD')
                                })
                            })
                        })
                </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.spec.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                            const CaesarsCipher = require('./caesars-cipher')
        
                            describe('caesars-cipher', () => {
                                describe('encode', () => {
                                    it(`should encode 'ABC' to 'BCD'`, () => {
                                        expect(CaesarsCipher.encode(1, 'ABC')).toBe(<mark>'BCD'</mark>)
                                    })
                                })
                            })
                    </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    class CaesarsCipher {
                        static encode(shift, text) {
                            return 'BCD'
                        }
                    }
                    module.exports = CaesarsCipher 
                </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    class CaesarsCipher {
                        static encode(shift, text) {
                            <mark>return 'BCD'</mark>
                        }
                    }
                    module.exports = CaesarsCipher 
                    </code></pre>
            </section>
            <section>
                <h3>A second test</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    const CaesarsCipher = require('caesars-cipher.js')

                    describe('caesars-cipher', () => {
                        describe('encode', () => {
                            it('should encode "ABC" to "BCD"', () => {
                                expect(CaesarsCipher.encode(1, 'ABC')).toBe('BCD')
                            })
                    
                            it('should encode "HELLOWORLD" to "IFMMPXPSME"', () => {
                                expect(CaesarsCipher.encode(1, 'HELLOWORLD')).toBe('IFMMPXPSME')
                            })
                        })
                    })
                </code></pre>
            </section>
            <section>
                <h3>A second test</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                        const CaesarsCipher = require('caesars-cipher.js')
    
                        describe('caesars-cipher', () => {
                            describe('encode', () => {
                                it('should encode "ABC" to "BCD"', () => {
                                    expect(CaesarsCipher.encode(1, 'ABC')).toBe('BCD')
                                })
                        
                                it('should encode "HELLOWORLD" to "IFMMPXPSME"', () => {
                                    expect(CaesarsCipher.encode(1, <mark>'HELLOWORLD'</mark>)).toBe(<mark>'IFMMPXPSME'</mark>)
                                })
                            })
                        })
                    </code></pre>
            </section>
            <section>
                <h3>A far better solution</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    class CaesarsCipher {
                        static encode(shift, text) {
                            let result = ""
                            for (let i = 0; i &gt; text.length; i++) {
                                result += String.fromCharCode(text.charCodeAt(i) + shift)
                            }
                            return result
                        }
                    }
                    module.exports = CaesarsCipher 
                </code></pre>
            </section>
            <section>
                <h3>A far better solution</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    class CaesarsCipher {
                        static encode(shift, text) {
                            let result = ""
                            for (let i = 0; <mark>i &gt; text.length</mark>; i++) {
                                result += String.fromCharCode(text.charCodeAt(i) + shift)
                            }
                            return result
                        }
                    }
                    module.exports = CaesarsCipher 
                </code></pre>
            </section>
            <section>
                <h3>A far better solution</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    class CaesarsCipher {
                        static encode(shift, text) {
                            let result = ""
                            for (let i = 0; i &gt; text.length; i++) {
                                result += String.fromCharCode(<mark>text.charCodeAt(i) + shift</mark>)
                            }
                            return result
                        }
                    }
                    module.exports = CaesarsCipher 
                </code></pre>
            </section>
            <section>
                <h3>A far better solution</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
                    class CaesarsCipher {
                        static encode(shift, text) {
                            let result = ""
                            for (let i = 0; i &gt; text.length; i++) {
                                result += <mark>String.fromCharCode</mark>  (text.charCodeAt(i) + shift)
                            }
                            return result
                        }
                    }
                    module.exports = CaesarsCipher 
                </code></pre>
            </section>
            <section>
                <h3>Parametrised tests</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('caesars-cipher')

describe('caesars-cipher', () => {
    describe('encode', () => {
        [
            { shift: 1, input: 'ABC', output: 'BCD' },
            { shift: 1, input: 'HELLOWORLD', output: 'IFMMPXPSME' },
            { shift: 1, input: 'XYZ', output: 'YZA'},
        ].forEach((setup) => {
            it(`should encode "${setup.input}" to "${setup.output}"`, () => {
                expect(CaesarsCipher.encode(setup.shift, setup.input))
                    .toBe(setup.output)
            })
        })
    })
}) 
                </code></pre>
            </section>
            <section>
                <h3>Parametrised tests</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('caesars-cipher')

describe('caesars-cipher', () => {
    describe('encode', () => {
        [
            { <mark>shift: 1</mark>, input: 'ABC', output: 'BCD' },
            { shift: 1, input: 'HELLOWORLD', output: 'IFMMPXPSME' },
            { shift: 1, input: 'XYZ', output: 'YZA'},
        ].forEach((setup) => {
            it(`should encode "${setup.input}" to "${setup.output}"`, () => {
                expect(CaesarsCipher.encode(<mark>setup.shift</mark>, setup.input))
                    .toBe(setup.output)
            })
        })
    })
})
                    </code></pre>
            </section>
            <section>
                <h3>Parametrised tests</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('caesars-cipher')

describe('caesars-cipher', () => {
    describe('encode', () => {
        [
            { shift: 1, <mark>input: 'ABC'</mark>, output: 'BCD' },
            { shift: 1, input: 'HELLOWORLD', output: 'IFMMPXPSME' },
            { shift: 1, input: 'XYZ', output: 'YZA'},
        ].forEach((setup) => {
            it(`should encode "${<mark>setup.input</mark>}" to "${setup.output}"`, () => {
                expect(CaesarsCipher.encode(setup.shift, <mark>setup.input</mark>))
                    .toBe(setup.output)
            })
        })
    })
}) 
                </code></pre>
            </section>
            <section>
                <h3>Parametrised tests</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('caesars-cipher')

describe('caesars-cipher', () => {
    describe('encode', () => {
        [
            { shift: 1, input: 'ABC', <mark>output: 'BCD'</mark> },
            { shift: 1, input: 'HELLOWORLD', output: 'IFMMPXPSME' },
            { shift: 1, input: 'XYZ', output: 'YZA'},
        ].forEach((setup) => {
            it(`should encode "${setup.input}" to "${<mark>setup.output</mark>}"`, () => {
                expect(CaesarsCipher.encode(setup.shift, setup.input))
                    .toBe(<mark>setup.output</mark>)
            })
        })
    })
}) 
                </code></pre>
            </section>
            <section>
                <h3>Parametrised tests</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('caesars-cipher')

describe('caesars-cipher', () => {
    describe('encode', () => {
        [
            <mark>{ shift: 1, input: 'ABC', output: 'BCD' },</mark>
            <mark>{ shift: 1, input: 'HELLOWORLD', output: 'IFMMPXPSME' },</mark>
            { shift: 1, input: 'XYZ', output: 'YZA'},
        ].forEach((setup) => {
            it(`should encode "${setup.input}" to "${setup.output}"`, () => {
                expect(CaesarsCipher.encode(setup.shift, setup.input))
                    .toBe(setup.output)
            })
        })
    })
}) 
                </code></pre>
            </section>
            <section>
                <h3>Parametrised tests</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('caesars-cipher')

describe('caesars-cipher', () => {
    describe('encode', () => {
        [
            { shift: 1, input: 'ABC', output: 'BCD' },
            { shift: 1, input: 'HELLOWORLD', output: 'IFMMPXPSME' },
            <mark>{ shift: 1, input: 'XYZ', output: 'YZA'},</mark>
        ].forEach((setup) => {
            it(`should encode "${setup.input}" to "${setup.output}"`, () => {
                expect(CaesarsCipher.encode(setup.shift, setup.input))
                    .toBe(setup.output)
            })
        })
    })
}) 
                    </code></pre>
            </section>
            <section>
                <h3>More Refactoring</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const _alphabet = ['A', 'B', /*...,*/ 'Y', 'Z']

function toAlphabetIndex (text) {
    return text.split('')
        .map((ch) => _alphabet.indexOf(ch))
}

class CaesarsCipher {
    static encode(shift, text) {
        let key =  _alphabet
                .slice(shift)
                .concat(_alphabet.slice(0, shift))

        return toAlphabetIndex(text).map((index) => {
            return key[index]
        }).join('')
    }
}
module.exports = CaesarsCipher
                </code></pre>
            </section>
            <section>
                <h3>More Refactoring</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
<mark>const _alphabet = ['A', 'B', /*...,*/ 'Y', 'Z']</mark>

function toAlphabetIndex (text) {
    return text.split('')
        .map((ch) => _alphabet.indexOf(ch))
}

class CaesarsCipher {
    static encode(shift, text) {
        let key =  <mark>_alphabet</mark>
                .slice(shift)
                .concat(_alphabet.slice(0, shift))

        return toAlphabetIndex(text).map((index) => {
            return key[index]
        }).join('')
    }
}
module.exports = CaesarsCipher
                </code></pre>
            </section>
            <section>
                <h3>More Refactoring</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const _alphabet = ['A', 'B', /*...,*/ 'Y', 'Z']

<mark>function toAlphabetIndex (text) {</mark>
<mark>    return text.split('')</mark>
<mark>        .map((ch) => _alphabet.indexOf(ch))</mark>
<mark>}</mark>

class CaesarsCipher {
    static encode(shift, text) {
        let key =  _alphabet
                .slice(shift)
                .concat(_alphabet.slice(0, shift))

        return <mark>toAlphabetIndex(text)</mark>.map((index) => {
            return key[index]
        }).join('')
    }
}
module.exports = CaesarsCipher
                </code></pre>
            </section>
            <section>
                <h3>More Refactoring</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const _alphabet = ['A', 'B', /*...,*/ 'Y', 'Z']

function toAlphabetIndex (text) {
    return text.split('')
        .map((ch) => _alphabet.indexOf(ch))
}

class CaesarsCipher {
    static encode(shift, text) {
        <mark>let key =  _alphabet</mark>
        <mark>        .slice(shift)</mark>
        <mark>        .concat(_alphabet.slice(0, shift))</mark>

        return toAlphabetIndex(text).map((index) => {
            <mark>return key[index]</mark>
        }).join('')
    }
}
module.exports = CaesarsCipher
                </code></pre>
            </section>

            <section>
                <h3>Undoing encode is decode</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
class CaesarsCipher {
    static encode(shift, text) {
        ...
    }

    static decode(shift, text) {
        return CaesarsCipher.encode(_alphabet.length - shift ,text)
    }
}
                </code></pre>
            </section>

            <section>
                <h3>Undoing encode is decode</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
class CaesarsCipher {
    static encode(shift, text) {
        ...
    }

    <mark>static decode(shift, text) {</mark>
    <mark>    return CaesarsCipher.encode(_alphabet.length - shift ,text)</mark>
    <mark>}</mark>
}
                </code></pre>
            </section>
            <section>
                <h3>Undoing encode is decode</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
class CaesarsCipher {
    static encode(shift, text) {
        ...
    }

    static decode(shift, text) {
        return CaesarsCipher.encode(<mark>_alphabet.length - shift</mark> ,text)
    }
}
                </code></pre>
            </section>

            <section>
                <h3>caesars-cipher.pbt.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('./caesars-cipher')
const jsc = require('jsverify')

describe('invariant', () =>  {
    it('should hold true for any parameter', () => {
        const outcome = jsc.checkForall(
            jsc.integer,
            jsc.string,
            (shift, text) => {
                const encoded = CaesarsCipher.encode(shift, text)
                const decoded = CaesarsCipher.decode(shift, encoded)
                return text === decoded
            }
        )
        expect(outcome).toBe(true)
    })
})
                </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.pbt.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('./caesars-cipher')
<mark>const jsc = require('jsverify')</mark>

describe('invariant', () =>  {
    it('should hold true for any parameter', () => {
        const outcome = jsc.checkForall(
            jsc.integer,
            jsc.string,
            (shift, text) => {
                const encoded = CaesarsCipher.encode(shift, text)
                const decoded = CaesarsCipher.decode(shift, encoded)
                return text === decoded
            }
        )
        expect(outcome).toBe(true)
    })
})
                    </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.pbt.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('./caesars-cipher')
const jsc = require('jsverify')

describe('invariant', () =>  {
    it('should hold true for any parameter', () => {
        const outcome = <mark>jsc.checkForall</mark>(
            jsc.integer,
            jsc.string,
            (shift, text) => {
                const encoded = CaesarsCipher.encode(shift, text)
                const decoded = CaesarsCipher.decode(shift, encoded)
                return text === decoded
            }
        )
        expect(outcome).toBe(true)
    })
})
                        </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.pbt.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('./caesars-cipher')
const jsc = require('jsverify')

describe('invariant', () =>  {
    it('should hold true for any parameter', () => {
        const outcome = jsc.checkForall(
            <mark>jsc.integer,</mark>
            <mark>jsc.string,</mark>
            (shift, text) => {
                const encoded = CaesarsCipher.encode(shift, text)
                const decoded = CaesarsCipher.decode(shift, encoded)
                return text === decoded
            }
        )
        expect(outcome).toBe(true)
    })
})
                            </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.pbt.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('./caesars-cipher')
const jsc = require('jsverify')

describe('invariant', () =>  {
    it('should hold true for any parameter', () => {
        const outcome = jsc.checkForall(
            jsc.integer,
            jsc.string,
            (shift, text) => {
                <mark>const encoded = CaesarsCipher.encode(shift, text)</mark>
                <mark>const decoded = CaesarsCipher.decode(shift, encoded)</mark>
                <mark>return text === decoded</mark>
            }
        )
        expect(outcome).toBe(true)
    })
})
                </code></pre>
            </section>
            <section>
                <h3>caesars-cipher.pbt.js</h3>
                <pre><code class="lang-JavaScript" data-trim data-noescape>
const CaesarsCipher = require('./caesars-cipher')
const jsc = require('jsverify')

describe('invariant', () =>  {
    it('should hold true for any parameter', () => {
        const outcome = jsc.checkForall(
            jsc.integer,
            jsc.string,
            (shift, text) => {
                const encoded = CaesarsCipher.encode(shift, text)
                const decoded = CaesarsCipher.decode(shift, encoded)
                return text === decoded
            }
        )
        <mark>expect(outcome).toBe(true)</mark>
    })
})
                </code></pre>
            </section>

            <section>
                <h1>Thank you</h1>
                <br><br> Christian H&ouml;rauf<br>
                <img src="images/twitter.png" width="5%"><sup>@fonzygruen</sup>
            </section>
            <section>
                <h2>Literature</h2>
                <ul>
                    <li><a href="https://martinfowler.com/bliki/TestPyramid.html">TestPyramid</a> by Martin Fowler</li>
                    <li><a href="http://geepawhill.org/tdd-and-the-lump-of-coding-fallacy/">The Lump of Coding Fallacy</a>
                        by Michael Hill</li>
                    <li><a href="https://www.amazon.de/Software-Craftsman-Professionalism-Pragmatism-Robert/dp/0134052501/ref=sr_1_1?s=books-intl-de&ie=UTF8&qid=1529882364&sr=1-1&keywords=The+Software+Craftsman">The
                            Software Craftsman</a> by Sandro Mancuso</li>
                    <li><a href="https://www.heise.de/developer/artikel/Propert y-based-Testing-mit-JUnit-QuickCheck-3935767.html">Property-based
                            Testing mit JUnit Quickcheck</a> by Stefan Macke</li>
                    <li><a href="https://medium.com/easy-pieces-for-programmers/how-to-trick-oo-programmers-into-loving-functional-programming-7019e1bf9bba">How
                            to Trick OO Programmers into Loving Functional Programming</a> by Nick Santos</li>
                    <li><a href="https://medium.com/@Jeffijoe/dependency-injection-in-node-js-2016-edition-f2a88efdd427">Dependency
                            Injection in Node.js - 2016 Edition</a> by Jeff Hansen</li>
                    <li><a href="https://medium.com/@rickhanlonii/understanding-jest-mocks-f0046c68e53c">Understanding Jest
                            Mocks
                        </a> by Rick Hanlon II</li>
                </ul>
            </section>
            <section>
                <h2>Tools</h2>
                <ul>
                    <li><a href="https://jestjs.io/">Jest</a></li>
                    <li><a href="https://github.com/jsverify/jsverify">JSVerify</a></li>
                    <li><a href="https://github.com/jeffijoe/awilix">Awilix</a></li>
                    <li><a href="https://istanbul.js.org/">Istanbul.js</a></li>
                    <li><a href="https://stryker-mutator.io/">Stryker</a></li>
                </ul>
            </section>
            <section>
                <h2>Special Thanks to </h2>
                <ul>
                    <li><a href="https://www.shadowshow.de/">Phil Shadow</a></li>
                </ul>
            </section>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/js/reveal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/markdown/marked.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/markdown/markdown.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/notes/notes.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/notes-server/client.js"></script>
    <script>
        Reveal.initialize({
            controls: false,
            progress: false,
            history: true,
            hideAddressBar: true,
            transition: "none",
            width: "100%",
            height: "100%"
        })
        hljs.initHighlightingOnLoad();
    </script>
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/print/pdf.css' : 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</body>

</html>